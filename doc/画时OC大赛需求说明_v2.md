# 画时 OC PK 活动需求说明

## 0、活动目标：

- 激发用户创作积极性，促进 OC（原创角色/Original Character）社区活跃。
- 通过 PK 投票赛制提升用户互动和参与感。
- 借助抽奖与社交分享传播，扩大活动影响力。
- 产出优质的 OC 作品榜单与获奖作品，打造社区荣誉感。

---

## 1. 活动概览

- **活动名称**：首届画时 OC 创作赛
- **目标用户**：原创角色创作者及社区观众
- **核心玩法**：
  1. 支持创作者报名参赛并补充亮点信息；
  2. 在多轮 PK 中完成投票、查看对阵、分享 PK 号码；
  3. 展示最终榜单并完成中奖用户的邮寄信息收集；
  4. 通过投票进度驱动抽奖，提升参与粘性。
- **赛制**
  - **单败淘汰**：参赛作品两两随机配对 PK，胜者晋级，负者淘汰。
  - **参赛数量**：用户可报名多个 OC 作品，不限数量。
  - **轮空晋级**：参赛数为奇数时，自动轮空作品直接晋级。
  - **票数清零**：每轮结束后清零票数，下一轮重新开始。
  - **平票处理**：按照作品本身在平台当中的点赞数以及评论数计算加权分数，加权分数大的一方获胜。加权分数计算规则：点赞数 + 5 \* 评论数
  - **报名筛选**：报名期结束后，由运营团队从报名作品中筛选 64 幅作品进入评选阶段。

---

## 2. 活动阶段与视图规则

| 阶段   | Stage Key                        | 默认视图 | 可访问视图                                      | 说明                                     |
| ------ | -------------------------------- | -------- | ----------------------------------------------- | ---------------------------------------- |
| 报名期 | `registration`                   | 首页     | 首页（home）、报名入口（register 按钮触发弹窗） | 仅开放报名相关能力。                     |
| 评选期 | `evaluation-32` / `evaluation-8` | PK 列表  | 首页、PK 投票、我的参赛、PK 列表、抽奖          | 对阵列表、投票与抽奖可用，报名入口关闭。 |
| 公示期 | `announcement`                   | 最终榜单 | 首页、我的参赛、最终榜单、抽奖                  | 投票相关入口关闭，自动弹出邮寄信息。     |

- **导航顺序**：顶部导航固定顺序 `home → register → vote → myEntries → pkList → leaderboard → lottery`，根据阶段隐藏不符合条件的入口。

---

## 3. 全局布局与通用元素

- **头部**：显示活动名称、副标题以及登录用户信息（昵称、头像、获奖标记）。
- **顶部导航**：按钮样式导航，当前视图高亮。禁用项不可点击且不显示。
- **PK 号码直达**：
  - 在评选期且当前视图不是投票页时，于导航下方显示 `PK号码` 输入框，可跳转到指定 PK 并切换到投票视图。
  - 投票页内保留同组件，便于在投票过程中直接跳转其它对阵。
- **弹窗蒙层**：报名、抽奖结果、邮寄信息均使用统一的蒙层样式。

---

## 4. 功能模块详述

### 4.1 活动首页（ActivityHome）

- **报名期内容**：
  - 活动亮点、奖品池列表。
  - 报名人数统计与“立即报名”按钮（触发报名弹窗，用户可选取自己的 OC 进行参赛）。

### 4.2 报名入口（RegistrationForm 模块弹窗）

- **触发条件**：仅在报名期通过首页按钮手动打开，也可再次关闭。
- **作品列表**：展示用户可报名的 OC 作品（图、作者、标签、简介），支持多选。
- **补充信息**：对已选作品填写参赛标题与亮点说明。
- **报名提交及分享**：点击“确认报名”后，弹出报名成功的弹窗，弹窗中可以输入其他用户的昵称，然后点击分享按钮，就可以在 app 内通过消息系统通知到对方。

### 4.3 PK 投票页（VotingArena）

- **头部信息**：当前轮次、PK 号码、截止时间、整体进度（已完场数 / 总场数）、阶段剩余时间。
- **作品展示**：
  - 左右两侧对阵卡片，标题、作者、亮点文案。
  - `WorkGallery` 组件支持多图切换、缩略图选择；无图时展示占位文案。用于显示用户 OC 的设定集。
  - “查看作品详情”按钮，点击后跳转到 app 内的 OC 展示页面。
- **实时票况**：
  - 中部投票进度条展示双方票数、比例及领先方描述。
- **投票操作**：
  - 底部按钮“投左 / 换一组 / 投右”；换一组随机挑选进行中的其它 PK。
  - 首票免费提示、累计投票与抽奖进度文案动态变化。多次投票时，投票按钮上的文案需要显示清楚需要消耗多少积分。
- **抽奖进度**：每投 10 票获得 1 次抽奖机会，文案实时反馈剩余票数或新增次数。

### 4.4 我的参赛（MyEntriesBoard）

- 展示用户全部参赛作品卡片，内容包含：封面、当前状态（进行中/晋级/淘汰/轮空）、当前轮次、对手信息、裁决说明。
- 提供“直达对阵 / 复制 PK 号码 / 分享”操作按钮（静态按钮）。
- 状态颜色区分四种状态便于快速识别。
- 分享功能与报名成功时的分享功能一致

### 4.5 PK 列表（PkListTable）

- **头部元信息**：当前轮次、完成进度条、剩余时间。
- **展示模式**：
  - 当存在 8 进 4 / 4 进 2 / 冠军战轮次时，启用 **淘汰赛树状视图**；根据轮次层级计算纵向位移与连线间距。
  - 其他情况下退化为表格列表，显示 PK 号、左右作品摘要、投票进度。
- **交互**：点击任意对阵卡片或表格行跳转到对应 PK，并切换到投票视图。
- **冠军卡片**：若冠军战已结束，突出显示冠军作品及票数；否则显示“等待揭晓”。

### 4.6 最终榜单（LeaderboardWall）

- 展示前 8 名作品，Top3 使用领奖台布局（含奖项徽章），其余作品栅格排列。
- 公示期内提示“榜单公示中”；

### 4.7 抽奖中心（LotteryPanel）

- **入口条件**：视图仅在评选期 / 公示期开放。
- **剩余次数**：显示剩余抽奖次数，次数为 0 时点击按钮给出“再投 10 票可获得 1 次”反馈。
- **奖池展示**：按配置列表展示奖品图片、名称、概率。
- **抽奖记录**：侧栏列表倒序记录本地抽奖历史。
- **弹窗反馈**：成功抽取后展示奖品图片与名称的结果弹窗，点击“知道了”关闭。没有抽中则显示“很遗憾，没有中奖”
- **提示机制**：抽奖按钮旁显示最近一次提示文案（自动 2.4 秒消失）。

### 4.8 邮寄信息弹窗（ShippingModal）

- **触发条件**：
  - 当前阶段为公示期；
  - 用户为获奖者（`userProfile.isWinner = true`）；
  - 未提交过邮寄信息。
- **表单字段**：收件人、联系电话、收件地址均为必填。
- **成功后处理**：关闭弹窗并在页面底部显示“邮寄信息已提交”浮条，列出姓名、电话、地址。
- **文案**：根据获奖作品名称与奖项动态生成祝贺语。

---
